<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup</title>
</head>
<body>
<!-- 부모 창의 값 표시 -->
<p>상품번호 : <input id="parentValue" th:text="${parentValue}" th:value="${parentValue}" disabled/></p>


<!-- 값 변경 버튼 -->
<button onclick="changeValue()">구매하기</button>

<!-- 부모 창의 값 업데이트 -->
<script>

    function changeValue() {


        var parentValue = document.getElementById("parentValue").value;

        // 부모 창의 값 업데이트
        window.opener.document.getElementById("saleStatus").value = 2;

        // 서버로 변경된 값 전송 (AJAX)
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/updateValue", true);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

        // JSON 형태로 데이터 전송
        xhr.send(JSON.stringify({ parentValue: parentValue }));

        // 팝업 창 닫기
        window.close();
    }
</script>
</body>
</html>